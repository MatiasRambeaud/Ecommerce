Apliqué un modelo de compra que si falta stock de algun articulo se le devuelve un arreglo de los productos en los que falta stock, y en caso que haya suficiente para todos se efectua la compra y se le devuelve el ticket. Si le parece darme alguna recomendacion (en especial sobre arquitectura y passport) me serviria mucho, fue el mejor profe que tuve en mi vida, ni en el secundario tuve alguien que explique con tanta claridad y pasion, le deseo lo mejor y espero que pueda encontrar un lugar para enseñar. Muchas gracias.